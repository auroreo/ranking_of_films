<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/style.css">
    <!-- Vue.JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js"></script>
    <!-- CDNJS :: Sortable (https://cdnjs.com/) -->
    <script defer src="//cdn.jsdelivr.net/npm/sortablejs@1.8.4/Sortable.min.js"></script>
    <!-- CDNJS :: Vue.Draggable (https://cdnjs.com/) -->
    <script defer src="//cdnjs.cloudflare.com/ajax/libs/Vue.Draggable/2.20.0/vuedraggable.umd.min.js"></script>
    <script defer src="./assets/js/script.js"></script>
    <title>Application de vote interactive</title>
</head>
<body>
    <header>
        <img 
            src="./assets/img/SVG/Fichier 1logo-ranking-of-films.svg" 
            alt="Logo Ranking of Films"
        >
        <h1>
            Ranking of Films
        </h1>
    </header>
    <main 
        id="app"
    >
        <section 
            id="films-vote" 
            v-if="displayVote">
            <select 
                name="type" 
                id="type" 
                v-model="genreSelected" 
                @change="showFilms(genreSelected.id);checkLocalStorage()"
            >
                <option 
                    disabled value=""
                >
                    Choisissez une catégorie
                </option>
                <option 
                    v-for="(item, index) in genresList"
                    :key="item.id"
                    :value="item"
                >
                        {{item.name}}
                </option>
            </select>
            <draggable 
                :list="filmsList" 
                group="people" 
                @start="drag=true" 
                @end="drag=false"
                id="draggable"
            >
                <div 
                    class="item-vote" 
                    v-for="(element, index) in filmsList" 
                    :key="element.id"
                >
                    <div class="item-vote-top"
                    >
                        <div 
                            class="item-vote-img-container"
                        >
                            <img 
                            class="img-arrow" 
                            src="./assets/img/reshot-icon-left-and-right-arrows-Z5XLT7B8WY.svg" 
                            alt="Icône flèche déplacement">
                        </div>
                        <div 
                            class="item-vote-index"
                        >
                            {{index+1}}
                        </div>
                    </div>
                    <div class="img-container">
                        <img :src="'https://image.tmdb.org/t/p/original/'+element.poster_path" :alt="'Poster du film '+element.title">
                    </div>
                    <div 
                        class="title"
                    >
                        {{element.title}}
                    </div>
                </div>
            </draggable>
            <button 
                v-if="displaySubmitButton"
                type="submit"
                @click="saveVote"
            >
                Terminer le vote
            </button>
        </section>
        <section id="results" v-if="displayResult">
            <!-- Boucle sur le tableau arrayResults qui récupère le vote enregistré dans le local storage -->
            <div id="container-results">
                <div class="item-vote" v-for="(element, index) in arrayResults" :key="element.id">
                    <div class="item-vote-index ranked">{{index+1}}</div>
                    <div class="img-container">
                        <img :src="'https://image.tmdb.org/t/p/original/'+element.poster_path" :alt="'Poster du film '+element.title">
                    </div>
                    <div class="title">
                        {{element.title}}
                    </div>
                </div>
            </div>
            <div>
                <button @click="editVote">Modifier</button>
            </div>
        </section>
    </main>
    <footer>
    </footer>
</body>
</html>